extends user-layout

block cust-css
  link(rel='stylesheet', href='/css/jstree.style.css')
  link(rel='stylesheet', href='/css/toastr.css')

block content
  if displayForm
    .row
      .col-md-8
        .portlet.light.bordered
          .portlet-title
            .caption
              span.caption-subject.font-green-sharp.bold.uppercase= displayForm.name + " - 表单实例"
            .actions
              a.btn.btn-circle.btn-danger.submitBtn(href="#")
                i.fa.fa-arrow-circle-up &nbsp;审核并提交
          .portlet-body
            table.table.list.table-striped.table-hover.table-bordered.dataTable.no-footer(role="grid")
              thead
                tr(role="row")
                  th.sorting(width="2%") 订单号
                  th.sorting 产品编号
                  th.sorting 类别
                  th.sorting 用途
                  th.sorting 规格
                  th.sorting 直径(m)
                  th.sorting 单件米长(m)
                  th.sorting 件数
                  th.sorting.form-status(tabindex="0", width="5%" rowspan="1", colspan="1") 状态&nbsp;
        #detail.portlet.light.bordered.hidden
          .portlet-title
            .caption
              span.caption-detail.font-green-sharp.bold.uppercase
              span.caption-helper
            .actions
              a.btn.btn-circle.btn-primary.sxfs-edit.hidden(href="#")
                i.fa.fa-edit &nbsp;收线方式次数
              a.btn.btn-circle.btn-primary.lbcs-edit.hidden(href="#")
                i.fa.fa-edit &nbsp;拉拔次数
              a.btn.btn-circle.btn-primary.edit-detail(href="#")
                i.fa.fa-edit &nbsp;修改
          .portlet-body
      .col-md-4.form-card(id=displayForm._id)
        .portlet.light.bordered
          .portlet-title
            .caption
              span.caption-subject.font-green-sharp.bold.uppercase= displayForm.name
              span.caption-helper
            .actions
              a.btn.btn-outline.btn-circle.expand.hidden(href="#")
                i.fa.fa-expand &nbsp;展开
              a.btn.btn-outline.btn-circle.compress.hidden(href="#")
                i.fa.fa-compress &nbsp;收起
          .portlet-body
            .tree-container
              .tree-actions.hidden
              .tree-body
          .portlet-footer
            .tree-header.form-inline.hidden
              .row
                .form-group.col-md-6
                  label 制表
                  input.form-control(type='text', name='author', disabled)
                .form-group.col-md-6
                  label 制表日期
                  input.form-control(type='text', name='created', disabled)
              .row
                .form-group.col-md-6
                  label 审核
                  input.form-control(type='text', name='auditor', disabled)
                .form-group.col-md-6
                  label 审核日期
                  input.form-control(type='text', name='audit_date', disabled)
  else
    .note.note-info
      h4.block 您没有任何授权的表单。
  #modal-detail.modal
    .modal-dialog
      form.form-horizontal(role="form")
        .modal-content
          .modal-header
            h4.modal-title
          .modal-body
          .modal-footer
            button.btn.btn-default(data-dismiss="modal") 取消
            button#detail-save.btn.btn-primary 保存
  #tmpls-edit.hidden
    #panels
      .panel.panel-default.gss
        .panel-heading
          h3.panel-title 钢丝绳
        .panel-body
          .form-group
            .col-md-4
              label.control-label 捻距(mm)
              input.form-control(name='nj', type='text')
            .col-md-4
              label.control-label 总米长
              input.form-control(name='zmc', type='text')
            .col-md-4
              label.control-label 轮盘型号
              input.form-control(name='lpxh', type='text')
      .panel.panel-default.gg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-4
              label.control-label 结构
              input.form-control(name='gg.jg', type='text')
            .col-md-4
              label.control-label 直径(mm)
              input.form-control(name='gg.zj', type='text')
            .col-md-4
              label.control-label 捻向
              input.form-control(name='gg.nx', type='text')
          .form-group
            .col-md-4
              label.control-label 强度(MPa)
              input.form-control(name='gg.qd', type='text', disabled)
            .col-md-4
              label.control-label 涂油方式
              input.form-control(name='gg.tyfs', type='text')
            .col-md-4
              label.control-label 捻距(mm)
              input.form-control(name='gg.nj', type='text')
      .panel.panel-default.sgg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-4
              label.control-label 类别
              input.form-control(name='gg.lb', type='text', disabled)
            .col-md-4
              label.control-label 直径(mm)
              input.form-control(name='gg.zj', type='text')
            .col-md-4
              label.control-label 强度(MPa)
              input.form-control(name='gg.qd', type='text', disabled)
      .panel.panel-default.yl
        .panel-heading
          h3.panel-title 用量
        .panel-body
          .form-group
            .col-md-4
              label.control-label 个数
              input.form-control(name='yl.gs', type='text')
            .col-md-4
              label.control-label 工艺米长系数
              input.form-control(name='yl.gymcxs', type='text')
      .panel.panel-default.sxfs
        .panel-heading
          h3.panel-title 收线方式
        .panel-body
          .repeat
            h5.detail-section-title 收线方式1:
            .form-group
              .col-md-3
                label.control-label 工艺米长系数
                input.form-control(name='yl.sxfs1.gymcxs', type='text')
              .col-md-3
                label.control-label 段长(m)
                input.form-control(name='yl.sxfs1.dc', type='text')
              .col-md-3
                label.control-label 段数
                input.form-control(name='yl.sxfs1.ds', type='text')
              .col-md-3
                label.control-label 单件米长(m)
                input.form-control(name='yl.sxfs1.djmc', type='text', readonly)
            .form-group
              .col-md-3
                label.control-label 件数
                input.form-control(name='yl.sxfs1.js', type='text')
              .col-md-4
                label.control-label 总米长(m)
                input.form-control(name='yl.sxfs1.zmc', type='text', readonly)
              .col-md-3
                label.control-label 工字轮型号
                input.form-control(name='yl.sxfs1.gzlxh', type='text')
      .panel.panel-default.gsxfs
        .panel-heading
          h3.panel-title 收线方式
        .panel-body
          .repeat
            h5.detail-section-title 收线方式1:
            .form-group
              .col-md-4
                label.control-label 段长(m)
                input.form-control(name='yl.sxfs1.dc', type='text')
              .col-md-4
                label.control-label 段数
                input.form-control(name='yl.sxfs1.ds', type='text')
              .col-md-4
                label.control-label 单件米长(m)
                input.form-control(name='yl.sxfs1.djmc', type='text', readonly)
            .form-group
              .col-md-3
                label.control-label 件数
                input.form-control(name='yl.sxfs1.js', type='text')
              .col-md-4
                label.control-label 总米长(m)
                input.form-control(name='yl.sxfs1.zmc', type='text', readonly)
              .col-md-3
                label.control-label 工字轮型号
                input.form-control(name='yl.sxfs1.gzlxh', type='text')
      .panel.panel-default.ssxfs
        .panel-heading
          h3.panel-title 收线方式
        .panel-body
          .repeat
            h5.detail-section-title 收线方式1:
            .form-group
              .col-md-3
                label.control-label 段长(m)
                input.form-control(name='yl.sxfs1.dc', type='text')
              .col-md-3
                label.control-label 段数
                input.form-control(name='yl.sxfs1.ds', type='text')
              .col-md-3
                label.control-label 单件米长(m)
                input.form-control(name='yl.sxfs1.djmc', type='text', readonly)
            .form-group
              .col-md-3
                label.control-label 件数
                input.form-control(name='yl.sxfs1.js', type='text')
              .col-md-3
                label.control-label 总米长(m)
                input.form-control(name='yl.sxfs1.zmc', type='text', readonly)
              .col-md-3
                label.control-label 总重量(kg)
                input.form-control(name='yl.sxfs1.zzl', type='text', readonly)
              .col-md-3
                label.control-label 工字轮型号
                input.form-control(name='yl.sxfs1.gzlxh', type='text')
      .panel.panel-default.xwxgg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-3
              label.control-label 类别
              input.form-control(name='gg.lb', type='text')
            .col-md-3
              label.control-label 直径(mm)
              input.form-control(name='gg.zj', type='text')
            .col-md-3
              label.control-label 捻向
              input.form-control(name='gg.nx', type='text')
            .col-md-3
              label.control-label 含油率(%)
              input.form-control(name='gg.hyl', type='text')
      .panel.panel-default.xwxyl
        .panel-heading
          h3.panel-title 用量
        .panel-body
          .form-group
            .col-md-3
              label.control-label 工艺米长系数
              input.form-control(name='yl.gymcxs', type='text')
            .col-md-3
              label.control-label 总米长(m)
              input.form-control(name='yl.zmc', type='text', readonly)
            .col-md-3
              label.control-label 吨耗(%)
              input.form-control(name='yl.dh', type='text')
            .col-md-3
              label.control-label 重量(kg)
              input.form-control(name='yl.zl', type='text', readonly)
      .panel.panel-default.yzgg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-3
              label.control-label 型号
              input.form-control(name='gg.xh', type='text')
      .panel.panel-default.yzyl
        .panel-heading
          h3.panel-title 用量
        .panel-body
          .form-group
            .col-md-3
              label.control-label 涂油方式
              input.form-control(name='yl.tyfs', type='text')
            .col-md-3
              label.control-label 吨耗(%)
              input.form-control(name='yl.dh', type='text')
            .col-md-3
              label.control-label 重量(kg)
              input.form-control(name='yl.zl', type='text')
      .panel.panel-default.ptgg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-4
              label.control-label 钢号
              input.form-control(name='gg.gh', type='text')
            .col-md-4
              label.control-label 直径(mm)
              input.form-control(name='gg.zj', type='text')
      .panel.panel-default.ptyl
        .panel-heading
          h3.panel-title 用量
        .panel-body
          .form-group
            .col-md-4
              label.control-label 吨耗(%)
              input.form-control(name='yl.dh', type='text')
            .col-md-4
              label.control-label 重量(kg)
              input.form-control(name='yl.zl', type='text')
      .panel.panel-default.plgg
        .panel-heading
          h3.panel-title 规格
        .panel-body
          .form-group
            .col-md-3
              label.control-label 类型
              input.form-control(name='lbcs1.gg.lx', type='text')
            .col-md-2
              label.control-label 类别
              input.form-control(name='lbcs1.gg.lb', type='text')
            .col-md-2
              label.control-label 钢号
              input.form-control(name='lbcs1.gg.gh', type='text')
            .col-md-2
              label.control-label 直径(mm)
              input.form-control(name='lbcs1.gg.zj', type='text')
            .col-md-3
              label.control-label 强度(MPa)
              input.form-control(name='lbcs1.gg.qd', type='text')
      .panel.panel-default.plyl
        .panel-heading
          h3.panel-title 用量
        .panel-body
          .form-group
            .col-md-3
              label.control-label 吨耗(%)
              input.form-control(name='lbcs1.yl.dh', type='text')
            .col-md-3
              label.control-label 重量(kg)
              input.form-control(name='lbcs1.yl.zl', type='text')
      .panel.panel-default.plqt
        .panel-heading
          h3.panel-title 其他
        .panel-body
          .form-group
            .col-md-3
              label.control-label 产后是否热处理
              input.form-control(name='lbcs1.chsfrcl', type='text')
            .col-md-3
              label.control-label 热处理方式
              input.form-control(name='lbcs1.rclfs', type='text')
            .col-md-3
              label.control-label 产后是否镀锌
              input.form-control(name='lbcs1.chsfdx', type='text')
    form.gss.form-horizontal(role='form', method='PUT', action='orderItem', panels='gss')
    form.zgdc1.form-horizontal(role='form', method='PUT', action='orderItem', panels='gg sxfs')
    form.g1.form-horizontal(role='form', method='PUT', action='orderItem', panels='gg yl gsxfs')
    form.ng1.form-horizontal(role='form', method='PUT', action='orderItem', tmpl-ref='zgdc1')
    form.hs1.form-horizontal(role='form', method='PUT', action='orderItem', tmpl-ref='zgdc1')
    form.sdc1.form-horizontal(role='form', method='PUT', action='orderItem', tmpl-ref='zgdc1')
    form.jsx.form-horizontal(role='form', method='PUT', action='orderItem', panels='gg yl gsxfs')
    form.zxg.form-horizontal(role='form', method='PUT', action='orderItem', panels='gg yl gsxfs')
    form.wg.form-horizontal(role='form', method='PUT', action='orderItem', panels='gg yl gsxfs')
    form.s1.form-horizontal(role='form', method='PUT', action='orderItem', panels='sgg yl ssxfs')
    form.xwx.form-horizontal(role='form', method='PUT', action='orderItem', panels='xwxgg xwxyl')
    form.yz.form-horizontal(role='form', method='PUT', action='orderItem', panels='yzgg yzyl')
    form.zxs.form-horizontal(role='form', method='PUT', action='orderItem', tmpl-ref='s1')
    form.pt.form-horizontal(role='form', method='PUT', action='orderItem', panels='ptgg ptyl')
    form.pl.form-horizontal(role='form', method='PUT', action='orderItem', panels='plgg plyl plqt')
      .repeat
        h5 1次拉拔产品
  #tmpls.hidden
    table.gss(ops='edit-detail')
      thead
        tr
          th(data-attr='ddh') 订单号
          th(data-attr='cpbh') 产品编号
          th(data-attr='lb') 类别
          th(data-attr='yt') 用途
          th(data-attr='gg') 规格
          th(data-attr='zj') 直径(mm)
          th(data-attr='djmc') 单件米长(m)
          th(data-attr='js') 件数
          th(data-attr='ckzzl') 参考总重量(kg)
          th(data-attr='qd') 强度(MPa)
          th(data-attr='nx') 捻向
          th(data-attr='nj') 捻距(mm)
          th(data-attr='tyfs') 涂油方式
          th(data-attr='bzfs') 包装方式
          th(data-attr='zmc') 总米长(m)
          th(data-attr='lpxh') 轮盘型号
          th(data-attr='tsyq') 特殊要求
    table.zgdc1(tmpls='gg sxfs', ops='edit-detail sxfs-edit')
    table.g1(tmpls='jsxgg gsxfs', ops='edit-detail sxfs-edit')
    table.ng1(tmpl-ref='zgdc1')
    table.hs1(tmpl-ref='zgdc1')
    table.sdc1(tmpl-ref='zgdc1')
    table.jsx(tmpls='jsxgg gsxfs', ops='edit-detail sxfs-edit')
    table.zxg(tmpl-ref='jsx')
    table.wg(tmpl-ref='jsx')
    table.s1(tmpls='ssxfs', ops='edit-detail sxfs-edit')
      thead
        tr
          th(colspan="3") 规格
          th.yl(colspan="2") 用量
        tr.sxfs
          th(data-attr='gg.lb') 类别
          th(data-attr='gg.zj') 直径(mm)
          th(data-attr='gg.qd') 强度(MPa)
          th(data-attr='yl.gs') 根数
          th(data-attr='yl.gymcxs') 工艺米长系数
    table.zxs(tmpl-ref='s1')
    table.pl(tmpls='lbcs', ops='lbcs-edit edit-detail')
    table.xwx(ops='edit-detail')
      thead
        tr
          th(colspan="4") 规格
          th(colspan="4") 用量
        tr
          th(data-attr='gg.lb') 类别
          th(data-attr='gg.zj') 直径(mm)
          th(data-attr='gg.nx') 捻向
          th(data-attr='gg.hyl') 含油率(%)
          th(data-attr='yl.gymcxs') 工艺米长系数
          th(data-attr='yl.zmc') 总米长(m)
          th(data-attr='yl.dh') 吨耗(%)
          th(data-attr='yl.zl') 重量(kg)
    table.yz(ops='edit-detail')
      thead
        tr
          th(colspan="1") 规格
          th(colspan="3") 用量
        tr
          th(data-attr='gg.xh') 型号
          th(data-attr='yl.tyfs') 涂油方式
          th(data-attr='yl.dh') 吨耗(%)
          th(data-attr='yl.zl') 重量(kg)
    table.pt(ops='edit-detail')
      thead
        tr
          th(colspan="2") 规格
          th(colspan="2") 用量
        tr
          th(data-attr='gg.gh') 钢号
          th(data-attr='gg.zj') 直径(mm)
          th(data-attr='yl.dh') 吨耗(%)
          th(data-attr='yl.zl') 重量(kg)
    table.jsxgg
      thead
        tr
          th(colspan="6") 规格
          th(colspan="2") 用量
        tr
          th(data-attr='gg.jg') 结构
          th(data-attr='gg.zj') 直径(mm)
          th(data-attr='gg.nx') 捻向
          th(data-attr='gg.qd') 强度(MPa)
          th(data-attr='gg.tyfs') 涂油方式
          th(data-attr='gg.nj') 捻距(mm)
          th(data-attr='yl.gs') 个数
          th(data-attr='yl.gymcxs') 工艺米长系数
    table.gg
      thead
        tr
          th(colspan="6") 规格
        tr.sxfs
          th(data-attr='gg.jg') 结构
          th(data-attr='gg.zj') 直径(mm)
          th(data-attr='gg.nx') 捻向
          th(data-attr='gg.qd') 强度(MPa)
          th(data-attr='gg.tyfs') 涂油方式
          th(data-attr='gg.nj') 捻距(mm)
    table.sxfs
      thead
        tr
          th.repeat(colspan="7") 收线方式1
        tr
          th(data-attr='yl.sxfs1.gymcxs') 工艺米长系数
          th(data-attr='yl.sxfs1.dc') 段长(m)
          th(data-attr='yl.sxfs1.ds') 段数
          th(data-attr='yl.sxfs1.djmc') 单件米长
          th(data-attr='yl.sxfs1.js') 件数
          th(data-attr='yl.sxfs1.zmc') 总米长(m)
          th(data-attr='yl.sxfs1.gzlxh') 工字轮型号
    table.gsxfs
      thead
        tr
          th.repeat(colspan="7") 收线方式1
        tr
          th(data-attr='yl.sxfs1.dc') 段长(m)
          th(data-attr='yl.sxfs1.ds') 段数
          th(data-attr='yl.sxfs1.djmc') 单件米长
          th(data-attr='yl.sxfs1.js') 件数
          th(data-attr='yl.sxfs1.zmc') 总米长(m)
          th(data-attr='yl.sxfs1.gzlxh') 工字轮型号
    table.ssxfs
      thead
        tr
          th.repeat(colspan="8") 收线方式1
        tr
          th(data-attr='yl.sxfs1.dc') 段长(m)
          th(data-attr='yl.sxfs1.ds') 段数
          th(data-attr='yl.sxfs1.djmc') 单件米长
          th(data-attr='yl.sxfs1.js') 件数
          th(data-attr='yl.sxfs1.zmc') 总米长(m)
          th(data-attr='yl.sxfs1.zzl') 总重量(kg)
          th(data-attr='yl.sxfs1.gzlxh') 工字轮型号
    table.lbcs
      thead
        tr
          th.repeat(colspan="10") 1次拉拔产品
        tr
          th(colspan="5") 规格
          th(colspan="2") 用量
          th(rowspan="2", data-attr='lbcs1.chsfrcl') 产后是否热处理
          th(rowspan="2", data-attr='lbcs1.rclfs') 热处理方式
          th(rowspan="2", data-attr='lbcs1.chsfdx') 产后是否镀锌
        tr
          th(data-attr='lbcs1.gg.lx') 类型
          th(data-attr='lbcs1.gg.lb') 类别
          th(data-attr='lbcs1.gg.gh') 钢号
          th(data-attr='lbcs1.gg.zj') 直径(mm)
          th(data-attr='lbcs1.gg.qd') 强度(MPa)
          th(data-attr='lbcs1.yl.dh') 吨耗(%)
          th(data-attr='lbcs1.yl.zl', style='border-right: 1px solid #ddd') 重量


block cust-js
  script(src='/js/vendor/jstree.js')
  script(src='/js/vendor/toastr.min.js')
  script(src='/js/user/order-item.js')
